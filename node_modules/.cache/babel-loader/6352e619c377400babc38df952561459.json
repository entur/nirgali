{"ast":null,"code":"var _jsxFileName = \"/Users/Goplen/Desktop/knowit/3psx/src/components/register.js\";\nimport React from \"react\";\nimport Background from \"../img/background.jpg\";\nimport NavBar from \"./navbar\";\nimport Select from 'react-select';\nimport api from \"../api/api\";\nimport 'flatpickr/dist/themes/material_blue.css';\nimport Flatpickr from 'react-flatpickr';\nvar stops = [];\n\nclass Register extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      date: '',\n      dateShort: '',\n      newAffect: '',\n      searchBar: '',\n      stops: '',\n      type: undefined,\n      chosenLine: undefined,\n      departure: undefined,\n      checkbox: undefined,\n      checkbox2: undefined,\n      multiples: undefined,\n      dateFromTo: undefined,\n      message: undefined,\n      submit: undefined,\n      departureSok: undefined,\n      reportType: 'general'\n    };\n\n    this.getIssuesCount = () => parseInt(JSON.parse(localStorage.getItem(\"issues\")).PtSituationElement.length);\n\n    this.createNewIssue = event => {\n      return {\n        CreationTime: this.state.date,\n        ParticipantRef: localStorage.getItem(\"loggedInAs\"),\n        SituationNumber: localStorage.getItem(\"loggedInAs\") + \":SituationNumber:\" + (parseInt(this.getIssuesCount()) + 1),\n        Source: {\n          SourceType: \"directReport\"\n        },\n        Progress: \"open\",\n        ValidityPeriod: {\n          StartTime: this.state.type === \"departure\" ? event.target.date.value + \":00+02:00\" : event.target.from.value + \":00+02:00\"\n        },\n        Severity: event.target.severity.value,\n        ReportType: this.state.reportType,\n        Summary: {\n          \"@Value\": event.target.oppsummering.value,\n          \"@Language\": \"NO\"\n        },\n        Description: {\n          \"@Value\": event.target.beskrivelse.value,\n          \"@Language\": \"NO\"\n        },\n        Affects: []\n      };\n    };\n\n    this.createNewLine = () => {\n      return {\n        Networks: {\n          AffectedNetwork: {\n            AffectedLine: {\n              LineRef: this.state.chosenLine,\n              Routes: null\n            }\n          }\n        }\n      };\n    };\n\n    this.createAffectedRoute = () => {\n      return this.state.multipleStops.map(item => ({\n        StopPoints: {\n          AffectedStopPoint: {\n            StopPointRef: item.value\n          }\n        }\n      }));\n    };\n\n    this.createNewSpecifiedStops = () => {\n      return {\n        Networks: {\n          AffectedNetwork: {\n            AffectedLine: {\n              LineRef: this.state.chosenLine,\n              Routes: {\n                AffectedRoute: this.createAffectedRoute()\n              }\n            }\n          }\n        }\n      };\n    };\n\n    this.createAffectedDeparture = () => {\n      return {\n        VehicleJourneys: {\n          AffectedVehicleJourney: {\n            FramedVehicleJourneyRef: {\n              DataFrameRef: document.getElementById(\"date\").value,\n              DatedVehicleJourneyRef: this.state.chosenLine\n            },\n            Route: null\n          }\n        }\n      };\n    };\n\n    this.createNewSpecifiedStopsDeparture = () => {\n      return {\n        VehicleJourneys: {\n          AffectedVehicleJourney: {\n            FramedVehicleJourneyRef: {\n              DataFrameRef: document.getElementById(\"date\").value,\n              DatedVehicleJourneyRef: this.state.chosenLine\n            },\n            Route: this.createAffectedRoute()\n          }\n        }\n      };\n    };\n\n    this.handleSubmit = event => {\n      const newIssue = this.createNewIssue(event);\n\n      if (this.state.type === \"departure\") {\n        newIssue.ValidityPeriod.push({\n          EndTime: event.target.date.value + \":00+02:00\"\n        });\n      } else {\n        if (event.target.to.value) {\n          newIssue.ValidityPeriod.push({\n            Endtime: event.target.to.value + \":00+02:00\"\n          });\n        }\n      }\n\n      if (this.state.type === \"line\") {\n        if (this.state.checkbox) {\n          const newAffect = this.createNewSpecifiedStops();\n          newIssue.Affects = newAffect;\n        } else {\n          const newAffect = this.createNewLine();\n          newIssue.Affects = newAffect;\n        }\n      }\n\n      if (this.state.type === \"stop\") {\n        const newAffect = this.createAffectedRoute();\n        newIssue.Affects = newAffect;\n      }\n\n      if (this.state.type === \"departure\") {\n        if (this.state.checkbox2) {\n          const newAffect = this.createNewSpecifiedStopsDeparture();\n          newIssue.Affects = newAffect;\n        } else {\n          const newAffect = this.createAffectedDeparture();\n          newIssue.Affects = newAffect;\n        }\n      }\n\n      const tmp = JSON.parse(localStorage.getItem(\"issues\"));\n      tmp.PtSituationElement.push(newIssue);\n      localStorage.setItem('issues', JSON.stringify(tmp));\n      this.props.history.push('/overview');\n    };\n\n    this.handleChangeSpecifyStopsLine = () => {\n      const checkBox = document.getElementById(\"gridCheck\");\n\n      if (checkBox.checked === true) {\n        this.setState({\n          checkbox: true\n        });\n      } else {\n        this.setState({\n          checkbox: undefined\n        });\n      }\n    };\n\n    this.handleChangeSpecifyStopsDeparture = () => {\n      const checkBox = document.getElementById(\"gridCheck2\");\n\n      if (checkBox.checked === true) {\n        this.setState({\n          checkbox2: true\n        });\n      } else {\n        this.setState({\n          checkbox2: undefined\n        });\n      }\n    };\n\n    this.handleClick = () => {\n      this.props.history.push('/');\n    };\n\n    this.callApiDeparture = event => {\n      const date = document.getElementById(\"date\").value;\n      const authorities = localStorage.getItem(\"loggedInAs\") + ':Authority:' + localStorage.getItem(\"loggedInAs\");\n      const line = this.state.chosenLine;\n      api.run('departure', authorities, line, date);\n      setTimeout(() => {\n        this.setState({\n          departureSok: true\n        });\n      }, 1200);\n    };\n\n    this.handleChangeType = event => {\n      if (this.state.departureSok) {\n        this.setState({\n          message: undefined\n        });\n      }\n\n      this.setState({\n        type: event.target.value,\n        checkbox: undefined,\n        checkbox2: undefined,\n        chosenLine: undefined,\n        departureSok: undefined,\n        submit: undefined,\n        departure: undefined\n      });\n\n      if (event.target.value === 'departure') {\n        this.setState({\n          departure: true,\n          dateFromTo: undefined,\n          message: undefined\n        });\n      }\n    };\n\n    this.handleChangeLine = event => {\n      if (this.state.type === 'departure') {\n        this.setState({\n          chosenLine: event.value\n        });\n      } else {\n        this.setState({\n          chosenLine: event.value,\n          dateFromTo: true,\n          message: true,\n          submit: true\n        });\n      }\n    };\n\n    this.handleChangeReportType = () => {\n      const checkBox = document.getElementById(\"gridCheck3\");\n\n      if (checkBox.checked === true) {\n        this.setState({\n          reportType: 'incident'\n        });\n      } else {\n        this.setState({\n          reportType: 'general'\n        });\n      }\n    };\n\n    this.handleChangeDeparture = event => {\n      this.setState({\n        chosenLine: event.value,\n        message: true,\n        submit: true\n      });\n    };\n\n    this.handleChangeSpecifiedStops = event => {\n      this.setState({\n        multipleStops: event,\n        dateFromTo: true,\n        message: true,\n        submit: true\n      });\n    };\n\n    this.handleChangeSpecifiedStopsDeparture = event => {\n      this.setState({\n        multipleStops: event\n      });\n    };\n\n    this.getFromLocalParsed = key => {\n      return JSON.parse(localStorage.getItem(key));\n    };\n\n    this.returnMappedObjects = list => {\n      return list.map(item => ({\n        label: item.name,\n        value: item.id\n      }));\n    };\n\n    this.returnSpecifiedLines = () => {\n      const tmp = JSON.parse(localStorage.getItem(\"lines\")).find(item => item.id === this.state.chosenLine);\n\n      if (tmp) {\n        return this.returnMappedObjects(tmp.quays);\n      }\n\n      return [];\n    };\n\n    this.returnSpecifiedLinesDeparture = () => {\n      const tmp = JSON.parse(localStorage.getItem(\"departure\")).find(item => item.id === this.state.chosenLine);\n\n      if (tmp) {\n        return tmp.estimatedCalls.map(item => ({\n          label: item.quay.name,\n          value: item.quay.id\n        }));\n      }\n\n      return [];\n    };\n\n    this.returnServiceJourney = () => {\n      return JSON.parse(localStorage.getItem(\"departure\")).map(item => ({\n        label: item.estimatedCalls[0].aimedDepartureTime.split(\"T\").pop() + \" fra \" + item.estimatedCalls[0].quay.name,\n        value: item.id\n      })).sort((a, b) => a.label > b.label ? 1 : -1);\n    };\n  }\n\n  // This function creates a value with current time and stops\n  componentDidMount() {\n    var that = this;\n    var date = new Date().getDate();\n\n    if (date < 10) {\n      date = \"0\" + date;\n    }\n\n    var month = new Date().getMonth() + 1;\n\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n\n    var year = new Date().getFullYear();\n    var hours = new Date().getHours();\n\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n\n    var min = new Date().getMinutes();\n\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n\n    var sec = new Date().getSeconds();\n\n    if (sec < 10) {\n      sec = \"0\" + sec;\n    }\n\n    that.setState({\n      date: year + '-' + month + '-' + date + 'T' + hours + ':' + min + ':' + sec + \".000+02:00\",\n      dateShort: year + '-' + month + '-' + date + 'T' + hours + ':' + min\n    });\n    setTimeout(() => {\n      JSON.parse(localStorage.getItem(\"lines\")).map((item, key) => stops = stops.concat(item.quays));\n    }, 800);\n  } // This function return the number of issues\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"navBar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"background\",\n      src: Background,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }), React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"register_box\",\n      id: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"register\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, \"Registrer ny melding\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, \"Velg linje, stopp eller avgang\"), React.createElement(\"select\", {\n      className: \"browser-default custom-select\",\n      defaultValue: \"default\",\n      onChange: this.handleChangeType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"default\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, \"Linje\"), React.createElement(\"option\", {\n      value: \"stop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"Stopp\"), React.createElement(\"option\", {\n      value: \"departure\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, \"Avgang\"))), React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, (this.state.type === \"line\" || this.state.type === \"departure\") && React.createElement(Select, {\n      placeholder: \"Velg linje\",\n      onChange: this.handleChangeLine,\n      options: this.returnMappedObjects(this.getFromLocalParsed(\"lines\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }), this.state.type === \"line\" && this.state.chosenLine && React.createElement(\"div\", {\n      className: \"form-check d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gridCheck\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"checkbox\",\n      id: \"gridCheck\",\n      value: \"stops\",\n      onChange: this.handleChangeSpecifyStopsLine,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, \"Gjelder avviket for spesifikke stopp?\"))), this.state.type === \"line\" && this.state.chosenLine && this.state.checkbox && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(Select, {\n      isMulti: true,\n      placeholder: \" \",\n      onChange: this.handleChangeSpecifiedStops,\n      options: this.returnSpecifiedLines(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    })), this.state.type === \"stop\" && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(Select, {\n      isMulti: true,\n      placeholder: \"Velg stopp\",\n      onChange: this.handleChangeSpecifiedStops,\n      options: this.returnMappedObjects(stops),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }))), this.state.departure && this.state.chosenLine && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"Gyldighetsdato\"), React.createElement(Flatpickr, {\n      id: \"date\",\n      \"data-enable-time\": true,\n      name: \"to\",\n      className: \"form-control\",\n      options: {\n        enableTime: false,\n        minDate: \"2020-01-15\",\n        dateFormat: \"Y-m-d\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.callApiDeparture,\n      type: \"button\",\n      className: \"btn btn-primary btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }, \"S\\xF8k avganger\")), this.state.departureSok && this.state.chosenLine && React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, \"Velg avgang\"), React.createElement(Select, {\n      placeholder: \" \",\n      onChange: this.handleChangeDeparture,\n      options: this.returnServiceJourney(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    })), this.state.departure && this.state.message && React.createElement(\"div\", {\n      className: \"form-check d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gridCheck\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"checkbox\",\n      id: \"gridCheck2\",\n      value: \"stops\",\n      onChange: this.handleChangeSpecifyStopsDeparture,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, \"Gjelder avviket for spesifikke stopp?\"))), this.state.departure && this.state.checkbox2 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417\n      },\n      __self: this\n    }, React.createElement(Select, {\n      isMulti: true,\n      placeholder: \" \",\n      onChange: this.handleChangeSpecifiedStopsDeparture,\n      options: this.returnSpecifiedLinesDeparture(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    })), this.state.dateFromTo && React.createElement(\"div\", {\n      className: \"bd-highlight justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, \"Gyldighetsdato\"), React.createElement(\"div\", {\n      className: \"form-group d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, React.createElement(Flatpickr, {\n      \"data-enable-time\": true,\n      value: this.state.dateShort,\n      name: \"from\",\n      className: \"form-control\",\n      options: {\n        enableTime: true,\n        dateFormat: \"Y-m-d H:i\",\n        minDate: this.state.dateShort,\n        time_24hr: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431\n      },\n      __self: this\n    }), React.createElement(Flatpickr, {\n      id: \"date-to\",\n      \"data-enable-time\": true,\n      name: \"to\",\n      placeholder: \"Til-dato\",\n      className: \"form-control\",\n      options: {\n        enableTime: true,\n        dateFormat: \"Y-m-d H:i\",\n        time_24hr: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441\n      },\n      __self: this\n    }))), this.state.message && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"severity&type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457\n      },\n      __self: this\n    }, \"Alvorlighetsgrad\"), React.createElement(\"select\", {\n      className: \"form-control\",\n      defaultValue: \"normal\",\n      name: \"severity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"noImpact\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }, \"Ingen\"), React.createElement(\"option\", {\n      value: \"slight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    }, \"Noe\"), React.createElement(\"option\", {\n      value: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, \"Normal\"), React.createElement(\"option\", {\n      value: \"severe\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }, \"Kritisk\")), React.createElement(\"div\", {\n      className: \"form-check d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gridCheck3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"checkbox\",\n      id: \"gridCheck3\",\n      value: \"incident\",\n      onChange: this.handleChangeReportType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    }, \"Er dette en ulykke?\")))), React.createElement(\"div\", {\n      className: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472\n      },\n      __self: this\n    }, \"Melding\"), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"oppsummering\",\n      className: \"form-control\",\n      placeholder: \"Oppsummering\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"beskrivelse\",\n      className: \"form-control\",\n      placeholder: \"Beskrivelse\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"submit justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }, this.state.submit && React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483\n      },\n      __self: this\n    }, \"Registrer\"), React.createElement(\"button\", {\n      onClick: this.handleClick,\n      type: \"submit\",\n      className: \"btn btn-warning btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, \"Tilbake\")))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/Goplen/Desktop/knowit/3psx/src/components/register.js"],"names":["React","Background","NavBar","Select","api","Flatpickr","stops","Register","Component","state","date","dateShort","newAffect","searchBar","type","undefined","chosenLine","departure","checkbox","checkbox2","multiples","dateFromTo","message","submit","departureSok","reportType","getIssuesCount","parseInt","JSON","parse","localStorage","getItem","PtSituationElement","length","createNewIssue","event","CreationTime","ParticipantRef","SituationNumber","Source","SourceType","Progress","ValidityPeriod","StartTime","target","value","from","Severity","severity","ReportType","Summary","oppsummering","Description","beskrivelse","Affects","createNewLine","Networks","AffectedNetwork","AffectedLine","LineRef","Routes","createAffectedRoute","multipleStops","map","item","StopPoints","AffectedStopPoint","StopPointRef","createNewSpecifiedStops","AffectedRoute","createAffectedDeparture","VehicleJourneys","AffectedVehicleJourney","FramedVehicleJourneyRef","DataFrameRef","document","getElementById","DatedVehicleJourneyRef","Route","createNewSpecifiedStopsDeparture","handleSubmit","newIssue","push","EndTime","to","Endtime","tmp","setItem","stringify","props","history","handleChangeSpecifyStopsLine","checkBox","checked","setState","handleChangeSpecifyStopsDeparture","handleClick","callApiDeparture","authorities","line","run","setTimeout","handleChangeType","handleChangeLine","handleChangeReportType","handleChangeDeparture","handleChangeSpecifiedStops","handleChangeSpecifiedStopsDeparture","getFromLocalParsed","key","returnMappedObjects","list","label","name","id","returnSpecifiedLines","find","quays","returnSpecifiedLinesDeparture","estimatedCalls","quay","returnServiceJourney","aimedDepartureTime","split","pop","sort","a","b","componentDidMount","that","Date","getDate","month","getMonth","year","getFullYear","hours","getHours","min","getMinutes","sec","getSeconds","concat","render","enableTime","minDate","dateFormat","time_24hr"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Background from \"../img/background.jpg\";\nimport NavBar from \"./navbar\";\nimport Select from 'react-select';\nimport api from \"../api/api\";\nimport 'flatpickr/dist/themes/material_blue.css';\nimport Flatpickr from 'react-flatpickr';\n\nvar stops = [];\n\nclass Register extends React.Component {\n\n    state = {\n            date: '',\n            dateShort: '',\n            newAffect: '',\n            searchBar: '',\n            stops: '',\n            type: undefined,\n            chosenLine: undefined,\n            departure: undefined,\n            checkbox: undefined,\n            checkbox2: undefined,\n            multiples: undefined,\n            dateFromTo: undefined,\n            message: undefined,\n            submit: undefined,\n            departureSok: undefined,\n            reportType: 'general',\n        };\n\n    // This function creates a value with current time and stops\n    componentDidMount() {\n        var that = this;\n        var date = new Date().getDate(); if(date < 10){ date = \"0\"+date }\n        var month = new Date().getMonth() + 1; if(month < 10){ month = \"0\"+month }\n        var year = new Date().getFullYear();\n        var hours = new Date().getHours(); if(hours < 10){ hours = \"0\"+hours }\n        var min = new Date().getMinutes(); if(min < 10){ min = \"0\"+min }\n        var sec = new Date().getSeconds(); if(sec < 10){ sec = \"0\"+sec }\n        that.setState({\n            date: year + '-' + month + '-' + date +'T' + hours + ':' + min + ':' + sec+\".000+02:00\",\n            dateShort: year + '-' + month + '-' + date +'T' + hours + ':' + min,\n        });\n\n        setTimeout(() => {\n            JSON.parse(localStorage.getItem(\"lines\")).map((item, key) => (\n                stops = stops.concat(item.quays)\n            ))\n        }, 800);\n    }\n\n    // This function return the number of issues\n    getIssuesCount = () => parseInt(JSON.parse(localStorage.getItem(\"issues\")).PtSituationElement.length);\n\n    // This function creates a new issue\n    createNewIssue = event => {\n        return {\n            CreationTime: this.state.date,\n            ParticipantRef: localStorage.getItem(\"loggedInAs\"),\n            SituationNumber: localStorage.getItem(\"loggedInAs\") + \":SituationNumber:\" + (parseInt(this.getIssuesCount())+1),\n            Source: {\n                SourceType: \"directReport\",\n            },\n            Progress: \"open\",\n            ValidityPeriod: {\n                StartTime: (this.state.type === \"departure\")? event.target.date.value+\":00+02:00\": event.target.from.value+\":00+02:00\",\n            },\n            Severity: event.target.severity.value,\n            ReportType: this.state.reportType,\n            Summary: {\n                \"@Value\": event.target.oppsummering.value,\n                \"@Language\": \"NO\"\n            },\n            Description: {\n                \"@Value\": event.target.beskrivelse.value,\n                \"@Language\": \"NO\"\n            },\n            Affects: [],\n        };\n    };\n\n    // This function creates objects for a new line\n    createNewLine = () => {\n        return {\n            Networks: { AffectedNetwork: { AffectedLine: { LineRef: this.state.chosenLine, Routes: null } } }\n        }\n    };\n\n    // This function creates objects for all specified stops for a line\n    createAffectedRoute = () => {\n        return this.state.multipleStops.map(item => (\n            { StopPoints: { AffectedStopPoint: { StopPointRef: item.value } } }\n        ))\n    };\n\n    // This function creates objects for a line with specified stops (calls createAffectedRoute)\n    createNewSpecifiedStops = () => {\n        return {\n            Networks: { AffectedNetwork: { AffectedLine: { LineRef: this.state.chosenLine,\n                        Routes: { AffectedRoute: this.createAffectedRoute() } } } }\n        }\n    };\n\n    // This function creates objects for a new departure\n    createAffectedDeparture = () => {\n        return {\n            VehicleJourneys: { AffectedVehicleJourney: { FramedVehicleJourneyRef: {\n                DataFrameRef: document.getElementById(\"date\").value, DatedVehicleJourneyRef: this.state.chosenLine }, Route: null }Â } }\n    };\n\n    // This function creates objects for a departure with specified stops (calls createAffectedDeparture)\n    createNewSpecifiedStopsDeparture = () => {\n        return {\n            VehicleJourneys: { AffectedVehicleJourney: { FramedVehicleJourneyRef: {\n                DataFrameRef: document.getElementById(\"date\").value, DatedVehicleJourneyRef: this.state.chosenLine },\n                    Route: this.createAffectedRoute() }Â }\n        }\n    };\n\n    // This function checks if the app is creating data for a line, stop or departure\n    handleSubmit = (event) => {\n\n        const newIssue = this.createNewIssue(event);\n\n        if(this.state.type === \"departure\"){\n            newIssue.ValidityPeriod.push({EndTime: event.target.date.value+\":00+02:00\"});\n        }else{\n            if(event.target.to.value){\n                newIssue.ValidityPeriod.push({Endtime: event.target.to.value+\":00+02:00\"});\n            }\n        }\n\n        if(this.state.type === \"line\"){\n            if(this.state.checkbox){\n                const newAffect = this.createNewSpecifiedStops();\n                newIssue.Affects = newAffect;\n            }else{\n                const newAffect = this.createNewLine();\n                newIssue.Affects = newAffect;\n            }\n        }\n        if(this.state.type === \"stop\"){\n            const newAffect = this.createAffectedRoute();\n            newIssue.Affects = newAffect;\n        }\n        if(this.state.type === \"departure\"){\n            if(this.state.checkbox2){\n                const newAffect = this.createNewSpecifiedStopsDeparture();\n                newIssue.Affects = newAffect;\n            }else{\n                const newAffect = this.createAffectedDeparture();\n                newIssue.Affects = newAffect;\n            }\n        }\n\n        const tmp = JSON.parse(localStorage.getItem(\"issues\"));\n        tmp.PtSituationElement.push(newIssue);\n        localStorage.setItem('issues', JSON.stringify(tmp));\n        this.props.history.push('/overview');\n    };\n\n    handleChangeSpecifyStopsLine = () => {\n        const checkBox = document.getElementById(\"gridCheck\");\n        if (checkBox.checked === true){\n            this.setState({\n                checkbox: true,\n            });\n        }else{\n            this.setState({\n                checkbox: undefined,\n            });\n        }\n    };\n\n    handleChangeSpecifyStopsDeparture = () => {\n        const checkBox = document.getElementById(\"gridCheck2\");\n        if (checkBox.checked === true){\n            this.setState({\n                checkbox2: true,\n            });\n        }else{\n            this.setState({\n                checkbox2: undefined,\n            });\n        }\n    };\n\n    handleClick = () => {\n        this.props.history.push('/');\n    };\n\n    callApiDeparture = (event) => {\n        const date = document.getElementById(\"date\").value;\n        const authorities = localStorage.getItem(\"loggedInAs\")+':Authority:'+localStorage.getItem(\"loggedInAs\");\n        const line = this.state.chosenLine;\n\n        api.run('departure', authorities, line, date);\n\n        setTimeout(() => {\n            this.setState({\n                departureSok: true,\n            });\n        }, 1200);\n\n    };\n\n    handleChangeType = (event) =>{\n        if(this.state.departureSok){\n            this.setState({\n                message: undefined,\n            });\n        }\n        this.setState({\n            type: event.target.value,\n            checkbox: undefined,\n            checkbox2: undefined,\n            chosenLine: undefined,\n            departureSok: undefined,\n            submit: undefined,\n            departure: undefined,\n        });\n        if(event.target.value === 'departure'){\n            this.setState({\n                departure: true,\n                dateFromTo: undefined,\n                message: undefined,\n            })\n        }\n    };\n\n    handleChangeLine = (event) => {\n        if(this.state.type === 'departure'){\n            this.setState({\n                chosenLine: event.value,\n            });\n        }else{\n            this.setState({\n                chosenLine: event.value,\n                dateFromTo: true,\n                message: true,\n                submit: true,\n            });\n        }\n    };\n\n    handleChangeReportType = () => {\n        const checkBox = document.getElementById(\"gridCheck3\");\n        if (checkBox.checked === true){\n            this.setState({\n                reportType: 'incident',\n            });\n        }else{\n            this.setState({\n                reportType: 'general',\n            });\n        }\n    };\n\n    handleChangeDeparture = (event) => {\n        this.setState({\n            chosenLine: event.value,\n            message: true,\n            submit: true,\n        });\n    };\n\n    handleChangeSpecifiedStops = (event) => {\n        this.setState({\n            multipleStops: event,\n            dateFromTo: true,\n            message: true,\n            submit: true,\n        });\n    };\n\n    handleChangeSpecifiedStopsDeparture = (event) => {\n        this.setState({ multipleStops: event });\n    };\n\n    getFromLocalParsed = (key) => {\n        return JSON.parse(localStorage.getItem(key))\n    };\n\n    returnMappedObjects = (list) => {\n        return list.map(item => (\n            { label: item.name, value: item.id }\n        ))\n    };\n\n    returnSpecifiedLines = () => {\n        const tmp = JSON.parse(localStorage.getItem(\"lines\")).find(item => (\n            (item.id === this.state.chosenLine)\n        ));\n\n        if(tmp){\n            return this.returnMappedObjects(tmp.quays);\n        }\n        return []\n    };\n\n    returnSpecifiedLinesDeparture = () => {\n        const tmp = JSON.parse(localStorage.getItem(\"departure\")).find(item => (\n            (item.id === this.state.chosenLine)\n        ));\n\n        if(tmp){\n            return tmp.estimatedCalls.map(item => (\n                { label: item.quay.name, value: item.quay.id }\n            ))\n        }\n        return []\n    };\n\n    returnServiceJourney = () => {\n        return JSON.parse(localStorage.getItem(\"departure\")).map(item => (\n            { label: item.estimatedCalls[0].aimedDepartureTime.split(\"T\").pop()+\" fra \"+item.estimatedCalls[0].quay.name,\n                value: item.id\n            }\n        )).sort((a, b) => (a.label > b.label) ? 1 : -1)\n\n    };\n\n    render() {\n        return (\n            <div>\n                <div className=\"navBar\">\n                    <img id=\"background\" src={ Background } alt=\"\" />\n                    <NavBar />\n                </div>\n                <div className=\"register_box\" id=\"small\" >\n                    <form className=\"register\" onSubmit={this.handleSubmit}>\n                        <h3 className=\"text-center text-white\">Registrer ny melding</h3>\n                        <br></br>\n                        <div className=\"choose_type\">\n                            <p className=\"text-center text-white\">Velg linje, stopp eller avgang</p>\n                            <select className=\"browser-default custom-select\" defaultValue={\"default\"} onChange={this.handleChangeType}>\n                                <option value=\"default\" disabled></option>\n                                <option value=\"line\">Linje</option>\n                                <option value=\"stop\">Stopp</option>\n                                <option value=\"departure\">Avgang</option>\n                            </select>\n                        </div>\n                        <div className=\"choose_type\">\n\n                            {((this.state.type === \"line\") || (this.state.type === \"departure\")) &&\n                            <Select placeholder=\"Velg linje\"\n                                onChange={this.handleChangeLine}\n                                    options={this.returnMappedObjects(this.getFromLocalParsed(\"lines\"))}\n                            />\n                            }\n\n                            {(this.state.type === \"line\") && (this.state.chosenLine) &&\n                            <div className=\"form-check d-flex\">\n                                <label className=\"form-check-label\" htmlFor=\"gridCheck\">\n                                    <input className=\"form-check-input\" type=\"checkbox\" id=\"gridCheck\" value=\"stops\" onChange={this.handleChangeSpecifyStopsLine} />\n                                    <p className=\"text-center text-white\">Gjelder avviket for spesifikke stopp?</p>\n                                </label>\n                            </div>\n                            }\n\n                            {(this.state.type === \"line\") && (this.state.chosenLine) && (this.state.checkbox) &&\n                            <div><Select isMulti\n                                    placeholder=\" \"\n                                    onChange={this.handleChangeSpecifiedStops}\n                                    options={this.returnSpecifiedLines()}\n                            /><br></br></div>\n                            }\n\n                            {(this.state.type === \"stop\") &&\n                            <div>\n                                <Select isMulti\n                                        placeholder=\"Velg stopp\"\n                                        onChange={this.handleChangeSpecifiedStops}\n                                        options={this.returnMappedObjects(stops)}\n                                />\n                                <br></br>\n                            </div>\n                            }\n                        </div>\n\n                        {(this.state.departure) && (this.state.chosenLine)  &&\n                        <div>\n                            <br></br>\n                            <p className=\"text-center text-white\">Gyldighetsdato</p>\n                            <Flatpickr id='date' data-enable-time\n                                       name='to'\n                                       className=\"form-control\"\n                                       options={ {\n                                           enableTime: false,\n                                           minDate: \"2020-01-15\",\n                                           dateFormat: \"Y-m-d\",}}\n                            />\n                            <button onClick={this.callApiDeparture} type=\"button\" className=\"btn btn-primary btn-lg btn-block\">SÃ¸k avganger</button>\n                        </div>}\n\n                        {(this.state.departureSok) && (this.state.chosenLine) &&\n                        <div className=\"choose_type\">\n                            <br></br>\n                            <p className=\"text-center text-white\">Velg avgang</p>\n                            <Select placeholder=\" \"\n                                onChange={this.handleChangeDeparture}\n                                    options={ this.returnServiceJourney() }\n                            />\n                        </div>}\n\n                        {(this.state.departure) && (this.state.message) &&\n                        <div className=\"form-check d-flex\">\n                            <label className=\"form-check-label\" htmlFor=\"gridCheck\">\n                                <input className=\"form-check-input\" type=\"checkbox\" id=\"gridCheck2\" value=\"stops\" onChange={this.handleChangeSpecifyStopsDeparture} />\n                                <p className=\"text-center text-white\">Gjelder avviket for spesifikke stopp?</p>\n                            </label>\n                        </div>\n                        }\n\n                        {(this.state.departure) && (this.state.checkbox2) &&\n                            <div>\n                                <Select isMulti\n                                        placeholder=\" \"\n                                        onChange={this.handleChangeSpecifiedStopsDeparture}\n                                        options={ this.returnSpecifiedLinesDeparture() }\n                                />\n                                <br></br>\n                            </div>\n                        }\n\n                        {(this.state.dateFromTo) &&\n                        <div className=\"bd-highlight justify-content-center\">\n                            <p className=\"text-center text-white\">Gyldighetsdato</p>\n                            <div className=\"form-group d-flex\">\n                                <Flatpickr data-enable-time\n                                           value={this.state.dateShort}\n                                           name='from'\n                                           className=\"form-control\"\n                                           options={ {\n                                               enableTime: true,\n                                               dateFormat: \"Y-m-d H:i\",\n                                               minDate: this.state.dateShort,\n                                               time_24hr: true}}\n                                />\n                                <Flatpickr id='date-to' data-enable-time\n                                           name='to'\n                                           placeholder='Til-dato'\n                                           className=\"form-control\"\n                                           options={ {\n                                               enableTime: true,\n                                               dateFormat: \"Y-m-d H:i\",\n                                               time_24hr: true}}\n                                />\n                            </div>\n                        </div>\n                        }\n\n                        {(this.state.message) &&\n                            <div>\n                                <div className=\"severity&type\">\n                                    <p className=\"text-center text-white\">Alvorlighetsgrad</p>\n                                    <select className=\"form-control\" defaultValue={\"normal\"} name=\"severity\">\n                                        <option value=\"noImpact\">Ingen</option>\n                                        <option value=\"slight\">Noe</option>\n                                        <option value=\"normal\">Normal</option>\n                                        <option value=\"severe\">Kritisk</option>\n                                    </select>\n                                    <div className=\"form-check d-flex\">\n                                        <label className=\"form-check-label\" htmlFor=\"gridCheck3\">\n                                            <input className=\"form-check-input\" type=\"checkbox\" id=\"gridCheck3\" value=\"incident\" onChange={this.handleChangeReportType} />\n                                            <p className=\"text-center text-white\">Er dette en ulykke?</p>\n                                        </label>\n                                    </div>\n                                </div>\n                                <div className=\"message\">\n                                    <p className=\"text-center text-white\">Melding</p>\n                                    <input type=\"String\" name=\"oppsummering\" className=\"form-control\" placeholder=\"Oppsummering\"\n                                           required/>\n                                    <input type=\"String\" name=\"beskrivelse\" className=\"form-control\" placeholder=\"Beskrivelse\"/>\n                                </div>\n                            </div>\n                        }\n                        <br></br>\n                        <br></br>\n                        <div className=\"submit justify-content-center\">\n                            {(this.state.submit) &&\n                            <button type=\"submit\" className=\"btn btn-primary btn-lg btn-block\">Registrer</button>}\n                            <button onClick={this.handleClick} type=\"submit\" className=\"btn btn-warning btn-lg btn-block\">Tilbake</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}